(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4c33b960"],{b3ed:function(e,t,o){"use strict";o.r(t);var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("oecp-page",{staticClass:"editCodePage",attrs:{title:e.titleName}},[o("el-form",{attrs:{model:e.addCodeForm,"label-position":"top","label-width":"80px"}},[o("el-form-item",{attrs:{label:"错误码"}},[o("el-input",{staticStyle:{width:"30%"},attrs:{maxLength:"50",placeholder:"输入你要保存的错误码"},model:{value:e.addCodeForm.code,callback:function(t){e.$set(e.addCodeForm,"code",t)},expression:"addCodeForm.code"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"描述"}},[o("el-input",{staticStyle:{width:"80%"},attrs:{type:"textarea",rows:"5",placeholder:"请输入该错误码的描述",maxLength:"100"},model:{value:e.addCodeForm.errorInfo,callback:function(t){e.$set(e.addCodeForm,"errorInfo",t)},expression:"addCodeForm.errorInfo"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"备注"}},[o("el-input",{staticStyle:{width:"50%"},attrs:{placeholder:"输入备注",maxLength:"255"},model:{value:e.addCodeForm.errorDesc,callback:function(t){e.$set(e.addCodeForm,"errorDesc",t)},expression:"addCodeForm.errorDesc"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"标签"}},[e._l(e.tags,(function(t){return o("el-tag",{directives:[{name:"show",rawName:"v-show",value:t.tag,expression:"item.tag"}],key:t.tag,attrs:{closable:"","disable-transitions":!1},on:{close:function(o){return e.handleClose(t)}}},[e._v(e._s(t.tag))])})),e._v(" "),e.inputVisible?o("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:e.handleInputConfirm},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleInputConfirm(t)}},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}):o("add-tags",{attrs:{addTagsName:"增加标签"},nativeOn:{click:function(t){return e.showInput(t)}}}),e._v(" "),o("el-form-item",{attrs:{label:"案例"}},[e._l(e.oecpCaseInfoRequests,(function(t,n){return o("add-case-info",{key:n,attrs:{caseInfoIndex:n,addCaseInfoForm:t},on:{delete:e.deleteCaseInfo}})})),e._v(" "),o("el-button",{staticStyle:{"margin-top":"5px","margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.addCaseInfo}},[e._v("增加案例")])],2)],2),e._v(" "),o("div",{staticClass:"confirm-class"},[o("el-button",{on:{click:e.cancelCommit}},[e._v("取消")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:e.goToCommit}},[e._v("保存")])],1)],1)],1)},s=[],a=o("eba2"),r=o("ed08"),i={data:function(){return{addCodeForm:{code:"",errorInfo:"",errorDesc:""},tags:[],inputVisible:!1,inputValue:"",oecpCaseInfoRequests:[],titleName:"错误码新建"}},methods:{handleClose:function(e){this.tags.splice(this.tags.indexOf(e),1)},showInput:function(){var e=this;console.log("click"),this.inputVisible=!0,this.$nextTick((function(t){e.$refs.saveTagInput.$refs.input.focus()}))},handleInputConfirm:function(){var e=this.inputValue;if(Object(r["a"])(this.tags,"tag",e))return this.$message.warning("错误码标签重复添加"),this.inputVisible=!1,void(this.inputValue="");e&&this.tags.push({tag:e}),this.inputVisible=!1,this.inputValue=""},cancelCommit:function(){this.$router.push("/errorDealWith/list")},goToCommit:function(){var e=this,t={codeId:this.addCodeForm.codeId,code:this.addCodeForm.code,errorInfo:this.addCodeForm.errorInfo,tags:this.tags,oecpCaseInfoRequests:this.oecpCaseInfoRequests,errorDesc:this.addCodeForm.errorDesc};Object(a["c"])(t).then((function(t){t.result&&!t.code?(e.$message.success("错误码保存成功!"),e.$router.push("/errorDealWith/list")):e.$message.error("保存失败")}))},addCaseInfo:function(){this.oecpCaseInfoRequests.push({title:"",content:"",tags:[]}),console.log(this.oecpCaseInfoRequests)},deleteCaseInfo:function(e){console.log(e),console.log(this.oecpCaseInfoRequests),this.oecpCaseInfoRequests.splice(e,1)}},mounted:function(){var e=this.$route.params.data;e&&(console.log(e),this.titleName="错误码编辑",this.addCodeForm=e,this.tags=e.errorTags,this.oecpCaseInfoRequests=e.caseInfos)}},c=i,l=(o("c8c9"),o("2877")),d=Object(l["a"])(c,n,s,!1,null,"56a1ed4b",null);t["default"]=d.exports},b6ba:function(e,t,o){},c8c9:function(e,t,o){"use strict";var n=o("b6ba"),s=o.n(n);s.a},eba2:function(e,t,o){"use strict";o.d(t,"c",(function(){return s})),o.d(t,"a",(function(){return a})),o.d(t,"b",(function(){return r})),o.d(t,"d",(function(){return i}));var n=o("b775");function s(e){return Object(n["a"])({url:"/saveOecpErrorInfo",method:"post",data:e})}function a(e){return Object(n["a"])({url:"/getErrorInfoAndCase",method:"get",params:e})}function r(e){return Object(n["a"])({url:"/oecpErrorInfo/remove",method:"get",params:{id:e}})}function i(e){return e||(e=""),Object(n["a"])({url:"/es/searchErrorCode",method:"get",params:{info:e}})}}}]);